# SPEC: GAS4U

## 1. プロジェクト概要
- **名前**: `gas4u`
- **目的**: Google Apps Script (GAS) 開発を支援するChrome拡張機能。AI機能(Gemini API)を活用してコード生成、補完、デバッグ支援を行う。
- **コアコンセプト**:
    1. **GAS開発支援**: Chrome拡張機能を通じてGASプロジェクトの編集、管理、同期を効率化する。
    2. **AI統合**: Gemini Flash/Pro APIを使用してコード生成、補完、デバッグ支援を提供する。
    3. **バージョン管理**: clasp相当の機能でGASプロジェクトとローカルのソースコードを同期する。

## 2. 機能要件 (Functional Requirements)

### FR-001: AIコード生成 (`AI Generate`)
- **機能**: Gemini APIを使用して、ユーザーの指示に基づいてGASコードを生成する。
- **ワークフロー**:
    1. ユーザーがAIにコード生成を指示する。
    2. Gemini APIがコードを生成する。
    3. 生成されたコードを差分表示し、ユーザーが承認後にGASプロジェクトに反映する。

### FR-002: GASプロジェクト管理 (`Project Management`)
- **機能**: GASプロジェクトの読み込み、編集、保存機能。
- **ワークフロー**:
    1. ユーザーがGASプロジェクトを選択する。
    2. プロジェクトのファイルを取得し、ES6以降に対応したJavaScriptエディタで編集可能にする。
    3. 編集内容をGASプロジェクトにプッシュする。

### FR-003: ソースコード同期 (`Sync`)
- **機能**: GASプロジェクトとローカルのソースコードを同期する(clasp相当の機能)。
- **出力**: GASプロジェクトのファイルをプル、編集したファイルをプッシュ。

### FR-004: Gemini API管理 (`API Management`)
- **機能**: GASプロジェクト、APIキーなどの情報をローカルストレージで管理する。
- **出力**: APIキー、プロジェクトID、認証情報の安全な保存と管理。

### FR-005: 差分表示と承認 (`Diff & Approval`)
- **機能**: AIが生成したソースコードの差分を表示し、ユーザーが承認後に反映できるようにする。
- **出力**: 変更前後のコード比較、承認インターフェース。

### FR-006: エディタ機能 (`Editor`)
- **機能**: ES6以降のJavaScriptに対応したGAS向けの最適化されたエディタインターフェース。
- **出力**: Monaco Editorを使用した高度なコード編集機能。

## 3. 非機能要件
- **Chrome拡張互換性**: Manifest V3に対応し、最新のChrome拡張機能のベストプラクティスに従う。
- **AI効率**: Gemini APIの使用効率を最大化し、トークン使用量を最適化する。
- **セキュリティ**: APIキーなどの機密情報はローカルストレージに安全に保存する。
- **ユーザビリティ**: 直感的なUIでGAS開発を効率化する。